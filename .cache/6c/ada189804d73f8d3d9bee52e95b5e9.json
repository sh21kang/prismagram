{"id":"pZ3y","dependencies":[{"name":"/Users/sangho/dev/nomad/prismagram/node_modules/apollo-server-lambda/dist/lambdaApollo.js.map","includedInParent":true,"mtime":1524594936000},{"name":"/Users/sangho/dev/nomad/prismagram/node_modules/apollo-server-lambda/src/lambdaApollo.ts","includedInParent":true,"mtime":1524521095000},{"name":"/Users/sangho/dev/nomad/prismagram/package.json","includedInParent":true,"mtime":1558526927558},{"name":"/Users/sangho/dev/nomad/prismagram/.babelrc","includedInParent":true,"mtime":1558528163945},{"name":"/Users/sangho/dev/nomad/prismagram/node_modules/apollo-server-lambda/package.json","includedInParent":true,"mtime":1524594914000},{"name":"apollo-server-core","loc":{"line":38,"column":35},"parent":"/Users/sangho/dev/nomad/prismagram/node_modules/apollo-server-lambda/dist/lambdaApollo.js","resolved":"/Users/sangho/dev/nomad/prismagram/node_modules/apollo-server-core/dist/index.js"},{"name":"apollo-server-module-graphiql","loc":{"line":39,"column":23},"parent":"/Users/sangho/dev/nomad/prismagram/node_modules/apollo-server-lambda/dist/lambdaApollo.js","resolved":"/Users/sangho/dev/nomad/prismagram/node_modules/apollo-server-module-graphiql/dist/index.js"}],"generated":{"js":"\"use strict\";var e=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function u(e){try{s(n.next(e))}catch(t){a(t)}}function i(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(u,i)}s((n=n.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var r,n,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},\"function\"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError(\"Generator is already executing.\");for(;u;)try{if(r=1,n&&(o=n[2&a[0]?\"return\":a[0]?\"throw\":\"next\"])&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,n=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(i){a=[6,i],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(exports,\"__esModule\",{value:!0});var r=require(\"apollo-server-core\"),n=require(\"apollo-server-module-graphiql\");function o(n){var o=this;if(!n)throw new Error(\"Apollo Server requires options.\");if(arguments.length>1)throw new Error(\"Apollo Server expects exactly one argument, got \"+arguments.length);return function(a,u,i){return e(o,void 0,void 0,function(){var e,o,s,l,c;return t(this,function(t){switch(t.label){case 0:e=\"POST\"===a.httpMethod?a.body:a.queryStringParameters,o=null,s=null,l={},e&&\"string\"==typeof e&&(e=JSON.parse(e)),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,r.runHttpQuery([a,u],{method:a.httpMethod,options:n,query:e})];case 2:return s=t.sent(),l[\"Content-Type\"]=\"application/json\",o=200,[3,5];case 3:if(\"HttpQueryError\"!==(c=t.sent()).name)throw c;return l=c.headers,o=c.statusCode,s=c.message,[3,5];case 4:return i(null,{statusCode:o,headers:l,body:s}),[7];case 5:return[2]}})})}}function a(e){return function(t,r,o){var a=t.queryStringParameters;n.resolveGraphiQLString(a,e,t,r).then(function(e){o(null,{statusCode:200,headers:{\"Content-Type\":\"text/html\"},body:e})},function(e){o(null,{statusCode:500,body:e.message})})}}exports.graphqlLambda=o,exports.graphiqlLambda=a;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":1411}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":1415}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":1417}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":1425}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":1447}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":1449}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":1457}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":1490}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":1499}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":25,"column":2},"generated":{"line":1,"column":1501}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":1504}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":1508}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":1510}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":27,"column":2},"generated":{"line":1,"column":1515}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":27,"column":7},"generated":{"line":1,"column":1519}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":1,"column":1521}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":28,"column":10},"generated":{"line":1,"column":1527}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":28,"column":14},"generated":{"line":1,"column":1531}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":28,"column":20},"generated":{"line":1,"column":1537}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":31,"column":2},"generated":{"line":1,"column":1572}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":31,"column":6},"generated":{"line":1,"column":1575}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":31,"column":16},"generated":{"line":1,"column":1585}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":31,"column":25},"generated":{"line":1,"column":1592}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":32,"column":4},"generated":{"line":1,"column":1594}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":32,"column":10},"generated":{"line":1,"column":1600}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":32,"column":14},"generated":{"line":1,"column":1604}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":33,"column":6},"generated":{"line":1,"column":1610}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":33,"column":57},"generated":{"line":1,"column":1661}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":33,"column":67},"generated":{"line":1,"column":1671}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":77,"column":2},"generated":{"line":1,"column":1679}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":37,"column":25},"generated":{"line":1,"column":1686}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":1,"column":1695}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":1,"column":1697}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":40,"column":4},"generated":{"line":1,"column":1699}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":40,"column":29},"generated":{"line":1,"column":1702}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":40,"column":29},"generated":{"line":1,"column":1709}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":40,"column":29},"generated":{"line":1,"column":1711}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":40,"column":29},"generated":{"line":1,"column":1718}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":40,"column":29},"generated":{"line":1,"column":1725}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":40,"column":29},"generated":{"line":1,"column":1727}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":1,"column":1801}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":43,"column":29},"generated":{"line":1,"column":1803}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":1812}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":43,"column":14},"generated":{"line":1,"column":1814}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":43,"column":38},"generated":{"line":1,"column":1825}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":43,"column":44},"generated":{"line":1,"column":1827}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":43,"column":51},"generated":{"line":1,"column":1832}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":43,"column":57},"generated":{"line":1,"column":1834}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":44,"column":6},"generated":{"line":1,"column":1856}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":44,"column":27},"generated":{"line":1,"column":1858}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":45,"column":6},"generated":{"line":1,"column":1863}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":45,"column":20},"generated":{"line":1,"column":1865}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":46,"column":6},"generated":{"line":1,"column":1870}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":46,"column":50},"generated":{"line":1,"column":1872}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":48,"column":8},"generated":{"line":1,"column":1875}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":48,"column":34},"generated":{"line":1,"column":1878}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":48,"column":24},"generated":{"line":1,"column":1895}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":49,"column":6},"generated":{"line":1,"column":1899}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":49,"column":14},"generated":{"line":1,"column":1901}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":49,"column":19},"generated":{"line":1,"column":1906}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":49,"column":25},"generated":{"line":1,"column":1912}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":53,"column":20},"generated":{"line":1,"column":1933}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":53,"column":20},"generated":{"line":1,"column":1963}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":53,"column":20},"generated":{"line":1,"column":1964}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":53,"column":26},"generated":{"line":1,"column":1966}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":53,"column":26},"generated":{"line":1,"column":1968}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":53,"column":39},"generated":{"line":1,"column":1981}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":53,"column":40},"generated":{"line":1,"column":1982}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":53,"column":47},"generated":{"line":1,"column":1984}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":53,"column":63},"generated":{"line":1,"column":1987}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":54,"column":8},"generated":{"line":1,"column":1988}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":54,"column":16},"generated":{"line":1,"column":1995}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":54,"column":22},"generated":{"line":1,"column":1997}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":2008}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":55,"column":17},"generated":{"line":1,"column":2016}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":56,"column":8},"generated":{"line":1,"column":2018}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":56,"column":15},"generated":{"line":1,"column":2024}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":53,"column":6},"generated":{"line":1,"column":2043}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":53,"column":20},"generated":{"line":1,"column":2045}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":53,"column":20},"generated":{"line":1,"column":2047}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":1,"column":2054}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":58,"column":14},"generated":{"line":1,"column":2056}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":58,"column":32},"generated":{"line":1,"column":2072}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":59,"column":6},"generated":{"line":1,"column":2091}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":59,"column":19},"generated":{"line":1,"column":2093}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":61,"column":6},"generated":{"line":1,"column":2110}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":61,"column":10},"generated":{"line":1,"column":2113}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":61,"column":37},"generated":{"line":1,"column":2145}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":2150}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":62,"column":14},"generated":{"line":1,"column":2156}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":65,"column":6},"generated":{"line":1,"column":2165}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":65,"column":16},"generated":{"line":1,"column":2167}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":65,"column":22},"generated":{"line":1,"column":2169}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":66,"column":6},"generated":{"line":1,"column":2177}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":66,"column":19},"generated":{"line":1,"column":2179}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":66,"column":25},"generated":{"line":1,"column":2181}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":67,"column":6},"generated":{"line":1,"column":2192}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":67,"column":20},"generated":{"line":1,"column":2194}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":67,"column":26},"generated":{"line":1,"column":2196}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":69,"column":6},"generated":{"line":1,"column":2224}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":69,"column":15},"generated":{"line":1,"column":2226}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":69,"column":21},"generated":{"line":1,"column":2231}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":1,"column":2232}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":70,"column":20},"generated":{"line":1,"column":2243}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":71,"column":8},"generated":{"line":1,"column":2245}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":71,"column":17},"generated":{"line":1,"column":2253}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":72,"column":8},"generated":{"line":1,"column":2255}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":72,"column":14},"generated":{"line":1,"column":2260}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":97,"column":0},"generated":{"line":1,"column":2291}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":97,"column":0},"generated":{"line":1,"column":2300}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":98,"column":2},"generated":{"line":1,"column":2302}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":125,"column":2},"generated":{"line":1,"column":2305}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":100,"column":26},"generated":{"line":1,"column":2312}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":101,"column":4},"generated":{"line":1,"column":2321}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":102,"column":4},"generated":{"line":1,"column":2323}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":103,"column":4},"generated":{"line":1,"column":2325}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":105,"column":4},"generated":{"line":1,"column":2328}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":105,"column":10},"generated":{"line":1,"column":2332}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":105,"column":18},"generated":{"line":1,"column":2334}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":105,"column":24},"generated":{"line":1,"column":2336}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":106,"column":4},"generated":{"line":1,"column":2358}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":106,"column":13},"generated":{"line":1,"column":2360}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":106,"column":35},"generated":{"line":1,"column":2382}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":106,"column":42},"generated":{"line":1,"column":2384}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":106,"column":51},"generated":{"line":1,"column":2386}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":106,"column":58},"generated":{"line":1,"column":2388}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":106,"column":73},"generated":{"line":1,"column":2391}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":107,"column":6},"generated":{"line":1,"column":2396}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":107,"column":6},"generated":{"line":1,"column":2405}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":108,"column":8},"generated":{"line":1,"column":2408}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":108,"column":17},"generated":{"line":1,"column":2410}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":108,"column":23},"generated":{"line":1,"column":2415}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":109,"column":10},"generated":{"line":1,"column":2416}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":109,"column":22},"generated":{"line":1,"column":2427}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":110,"column":10},"generated":{"line":1,"column":2431}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":110,"column":19},"generated":{"line":1,"column":2439}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":111,"column":12},"generated":{"line":1,"column":2440}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":111,"column":28},"generated":{"line":1,"column":2455}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":113,"column":10},"generated":{"line":1,"column":2468}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":113,"column":16},"generated":{"line":1,"column":2473}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":116,"column":6},"generated":{"line":1,"column":2478}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":116,"column":6},"generated":{"line":1,"column":2487}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":117,"column":8},"generated":{"line":1,"column":2490}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":117,"column":17},"generated":{"line":1,"column":2492}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":117,"column":23},"generated":{"line":1,"column":2497}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":118,"column":10},"generated":{"line":1,"column":2498}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":118,"column":22},"generated":{"line":1,"column":2509}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":119,"column":10},"generated":{"line":1,"column":2513}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":119,"column":16},"generated":{"line":1,"column":2518}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":119,"column":22},"generated":{"line":1,"column":2520}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":2533}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":2541}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":2555}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":97,"column":0},"generated":{"line":1,"column":2557}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":97,"column":0},"generated":{"line":1,"column":2565}},{"source":"../src/lambdaApollo.ts","name":null,"original":{"line":97,"column":0},"generated":{"line":1,"column":2580}}],"sources":{"../src/lambdaApollo.ts":"import * as lambda from 'aws-lambda';\nimport { GraphQLOptions, runHttpQuery } from 'apollo-server-core';\nimport * as GraphiQL from 'apollo-server-module-graphiql';\n\nexport interface LambdaGraphQLOptionsFunction {\n  (event: any, context: lambda.Context):\n    | GraphQLOptions\n    | Promise<GraphQLOptions>;\n}\n\n// Design principles:\n// - there is just one way allowed: POST request with JSON body. Nothing else.\n// - simple, fast and secure\n//\n\nexport interface LambdaHandler {\n  (event: any, context: lambda.Context, callback: lambda.Callback): void;\n}\n\nexport interface IHeaders {\n  [header: string]: string | number;\n}\n\nexport function graphqlLambda(\n  options: GraphQLOptions | LambdaGraphQLOptionsFunction,\n): LambdaHandler {\n  if (!options) {\n    throw new Error('Apollo Server requires options.');\n  }\n\n  if (arguments.length > 1) {\n    throw new Error(\n      `Apollo Server expects exactly one argument, got ${arguments.length}`,\n    );\n  }\n\n  const graphqlHandler = async (\n    event,\n    lambdaContext: lambda.Context,\n    callback: lambda.Callback,\n  ) => {\n    let query =\n        event.httpMethod === 'POST' ? event.body : event.queryStringParameters,\n      statusCode: number = null,\n      gqlResponse = null,\n      headers: { [headerName: string]: string } = {};\n\n    if (query && typeof query === 'string') {\n      query = JSON.parse(query);\n    }\n\n    try {\n      gqlResponse = await runHttpQuery([event, lambdaContext], {\n        method: event.httpMethod,\n        options: options,\n        query: query,\n      });\n      headers['Content-Type'] = 'application/json';\n      statusCode = 200;\n    } catch (error) {\n      if ('HttpQueryError' !== error.name) {\n        throw error;\n      }\n\n      headers = error.headers;\n      statusCode = error.statusCode;\n      gqlResponse = error.message;\n    } finally {\n      callback(null, {\n        statusCode: statusCode,\n        headers: headers,\n        body: gqlResponse,\n      });\n    }\n  };\n\n  return graphqlHandler;\n}\n\nexport interface LambdaGraphiQLOptionsFunction {\n  (event: any, context: lambda.Context):\n    | GraphiQL.GraphiQLData\n    | Promise<GraphiQL.GraphiQLData>;\n}\n\n/* This Lambda Function Handler returns the html for the GraphiQL interactive query UI\n *\n * GraphiQLData arguments\n *\n * - endpointURL: the relative or absolute URL for the endpoint which GraphiQL will make queries to\n * - (optional) query: the GraphQL query to pre-fill in the GraphiQL UI\n * - (optional) variables: a JS object of variables to pre-fill in the GraphiQL UI\n * - (optional) operationName: the operationName to pre-fill in the GraphiQL UI\n * - (optional) result: the result of the query to pre-fill in the GraphiQL UI\n */\n\nexport function graphiqlLambda(\n  options: GraphiQL.GraphiQLData | LambdaGraphiQLOptionsFunction,\n) {\n  const graphiqlHandler = (\n    event,\n    lambdaContext: lambda.Context,\n    callback: lambda.Callback,\n  ) => {\n    const query = event.queryStringParameters;\n    GraphiQL.resolveGraphiQLString(query, options, event, lambdaContext).then(\n      graphiqlString => {\n        callback(null, {\n          statusCode: 200,\n          headers: {\n            'Content-Type': 'text/html',\n          },\n          body: graphiqlString,\n        });\n      },\n      error => {\n        callback(null, {\n          statusCode: 500,\n          body: error.message,\n        });\n      },\n    );\n  };\n\n  return graphiqlHandler;\n}\n"},"lineCount":null}},"error":null,"hash":"84dd1b8fea11d3734e836d54fe5c1d65","cacheData":{"env":{}}}